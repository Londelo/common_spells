{
  "repositories": {
    "registration-workers": {
      "classification": "worker",
      "tech_stack": {
        "language": "TypeScript",
        "runtime": "Node.js 18.18.2",
        "framework": "Serverless"
      },
      "architectural_style": "serverless-event-driven",
      "domains": ["registration", "replication", "selection", "dataPipeline", "notification"],
      "infrastructure": {
        "lambdas": 13,
        "queues": 23,
        "topics": 1,
        "step_functions": 2
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/registration-workers",
      "last_updated": "2026-01-23T00:00:00.000Z"
    },
    "admin-ui": {
      "classification": "frontend",
      "tech_stack": {
        "language": "JavaScript",
        "framework": "React 16.14.0",
        "state_management": "Redux + Redux-Saga",
        "data_layer": "Apollo Client + GraphQL"
      },
      "architectural_style": "flux-architecture",
      "domains": ["campaign-management", "fan-selection", "analytics"],
      "infrastructure": {
        "platform": "Kubernetes (EKS)",
        "ci_cd": "GitLab CI",
        "environments": ["dev", "qa", "preprod", "prod"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/admin-ui",
      "last_updated": "2026-01-23T19:45:00Z",
      "health_indicators": {
        "dependency_health_score": 4.5,
        "critical_issues": 5,
        "test_coverage": "low",
        "code_quality_grade": "B+"
      }
    },
    "campaign-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript",
        "runtime": "Node.js",
        "framework": "Koa.js"
      },
      "architectural_style": "3-tier-restful-clean-architecture",
      "domains": ["campaign-management", "market-management", "artist-extensions"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 39,
        "databases": ["MongoDB", "Redis"],
        "message_queues": ["SQS", "Kinesis"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/campaign-service",
      "last_updated": "2026-01-24T06:15:00.000Z",
      "health_indicators": {
        "dependency_health_score": 6,
        "test_coverage": "65%",
        "test_framework": "Cucumber (BDD)",
        "test_scenarios": 163,
        "code_quality_grade": "A-"
      }
    },
    "entry-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript",
        "runtime": "Node.js",
        "framework": "Koa 2.4.1"
      },
      "architectural_style": "layered-clean-architecture",
      "domains": ["campaign-entry", "scoring", "verification", "presale-codes"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 28,
        "databases": ["MongoDB"],
        "message_queues": ["SQS", "Kinesis"],
        "data_stores": ["DynamoDB", "S3"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/entry-service",
      "last_updated": "2026-01-24T06:45:00Z",
      "health_indicators": {
        "dependency_health_score": 5,
        "critical_issues": 2,
        "high_priority_updates": 8,
        "test_coverage": "unknown",
        "test_framework": "Jest + Cucumber",
        "unit_tests": 31,
        "feature_tests": 25,
        "code_quality_grade": "B+"
      }
    },
    "monoql": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript (ES6+)",
        "runtime": "Node.js 18.18.2",
        "framework": "Koa + Apollo Server"
      },
      "architectural_style": "graphql-gateway-bff",
      "domains": ["campaign", "entry", "wave", "viewer", "metrics", "exports", "codes", "content", "identity", "ppc", "promoter", "markets", "stats", "filterlist", "upload"],
      "infrastructure": {
        "api_type": "GraphQL",
        "queries": 15,
        "mutations": 29,
        "types": 89,
        "enums": 11,
        "platform": "Kubernetes (EKS)",
        "databases": ["MongoDB"],
        "storage": ["S3"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/monoql",
      "last_updated": "2026-01-24T20:30:00Z",
      "health_indicators": {
        "dependency_health_score": 3,
        "critical_issues": 6,
        "risk_level": "HIGH",
        "test_coverage": "unknown",
        "test_framework": "Jest + Cucumber",
        "unit_tests": 10,
        "feature_tests": 22,
        "code_quality_grade": "A-"
      }
    },
    "appsync": {
      "classification": "service",
      "tech_stack": {
        "language": "TypeScript 5.1.6",
        "runtime": "AppSync JavaScript (APPSYNC_JS 1.0.0)",
        "framework": "AWS AppSync GraphQL",
        "build_tool": "esbuild 0.18.20"
      },
      "architectural_style": "serverless-pipeline-graphql",
      "domains": ["fan-scoring", "identity-management", "demand-tracking", "registration", "verification"],
      "infrastructure": {
        "api_type": "GraphQL",
        "queries": 11,
        "mutations": 5,
        "subscriptions": 1,
        "resolvers": 21,
        "pipeline_functions": 51,
        "platform": "AWS AppSync",
        "infrastructure": "Terraform",
        "ci_cd": "GitLab CI",
        "environments": ["qa1", "qa2", "dev1", "preprod1", "prod1"],
        "databases": ["DynamoDB"],
        "integrations": ["Lambda", "HTTP"],
        "lambda_functions": 9
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/appsync",
      "last_updated": "2026-01-24T17:45:00Z",
      "health_indicators": {
        "dependency_health_score": 6,
        "critical_issues": 0,
        "high_priority_updates": 3,
        "test_coverage": "unknown",
        "test_framework": "Jest + Cucumber",
        "unit_tests": 36,
        "feature_tests": 6,
        "code_quality_grade": "A+"
      }
    },
    "demand-workers": {
      "classification": "worker",
      "tech_stack": {
        "language": "JavaScript/TypeScript",
        "runtime": "Node.js 18.x",
        "framework": "AWS Lambda"
      },
      "architectural_style": "serverless-event-driven",
      "domains": ["demand-notification", "sms-delivery", "url-shortening", "event-details"],
      "infrastructure": {
        "platform": "AWS Lambda",
        "lambdas": 8,
        "databases": ["MongoDB", "Redis"],
        "streams": ["DynamoDB Streams", "Kinesis"],
        "queues": ["SQS"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/demand-workers",
      "last_updated": "2026-01-24T21:30:00Z",
      "health_indicators": {
        "dependency_health_score": 5,
        "critical_issues": 3,
        "risk_level": "MEDIUM-HIGH",
        "test_coverage": "30%",
        "test_framework": "Jest + Cucumber",
        "unit_tests": 34,
        "feature_tests": 8,
        "code_quality_grade": "B+"
      }
    },
    "campaign-pipeline-workers": {
      "classification": "worker",
      "tech_stack": {
        "language": "JavaScript/TypeScript",
        "runtime": "Node.js",
        "framework": "Serverless"
      },
      "architectural_style": "serverless-event-driven",
      "domains": ["campaign-scoring", "code-assignment", "sms-waves", "data-pipeline"],
      "infrastructure": {
        "lambdas": 15,
        "kinesis_streams": 3,
        "sqs_queues": 3,
        "s3_buckets": 3,
        "dynamodb_tables": 2
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/campaign-pipeline-workers",
      "last_updated": "2026-01-24T00:00:00Z"
    },
    "admin-ui-next": {
      "classification": "frontend",
      "tech_stack": {
        "language": "TypeScript 5",
        "framework": "Next.js 15.3.6",
        "state_management": "Zustand 4.5.7",
        "data_layer": "Apollo Client 3.13.8 + GraphQL"
      },
      "architectural_style": "hybrid-next-app-router-fsd",
      "domains": ["campaign-management", "promoter-management", "event-creation"],
      "infrastructure": {
        "platform": "Unknown",
        "ci_cd": "Unknown",
        "environments": ["dev", "qa", "preprod", "prod"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/admin-ui-next",
      "last_updated": "2026-01-24T12:00:00Z",
      "health_indicators": {
        "dependency_health_score": "A",
        "test_coverage": "<5%",
        "code_quality_grade": "Exceptional"
      }
    },
    "user-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript (ES6+)",
        "runtime": "Node.js 18.18.2",
        "framework": "Koa 2.4.1"
      },
      "architectural_style": "3-tier-layered-monolithic",
      "domains": ["authentication", "user-profile", "user-management", "permissions", "supreme-users"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 16,
        "databases": ["MongoDB"],
        "message_queues": ["Kinesis"],
        "platform": "Kubernetes (EKS)",
        "ci_cd": "GitLab CI",
        "environments": ["qa", "dev", "preprod", "prod-east", "prod-west"],
        "clusters": ["nonprod9.us-east-1", "preprod9.us-east-1", "prod9.us-east-1", "prod10.us-west-2"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/user-service",
      "last_updated": "2026-01-24T21:30:00Z",
      "health_indicators": {
        "test_coverage": "Not enabled",
        "unit_tests": 8,
        "e2e_tests": 17,
        "code_quality_grade": "B+"
      }
    },
    "code-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript",
        "runtime": "Node.js",
        "framework": "Koa 2.4.1"
      },
      "architectural_style": "layered-monolith-clean-architecture",
      "domains": ["promotional-codes", "code-inventory-management"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 7,
        "databases": ["MongoDB"],
        "storage": ["S3"],
        "observability": ["Prometheus", "LightStep"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/code-service",
      "last_updated": "2026-01-24T09:20:00Z",
      "health_indicators": {
        "dependency_health_score": 4,
        "critical_issues": 3,
        "risk_level": "HIGH",
        "test_coverage": "unknown",
        "test_framework": "Jest + Cucumber",
        "unit_tests": 4,
        "feature_tests": 6,
        "code_quality_grade": "A-"
      }
    },
    "export-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript",
        "runtime": "Node.js 18",
        "framework": "Koa 2.4.1"
      },
      "architectural_style": "layered-queue-based-processing",
      "domains": ["campaign-data-export", "sfmc-integration", "analytics-pipeline"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 4,
        "databases": ["MongoDB"],
        "storage": ["S3", "Athena"],
        "compute": ["EC2 + Docker"],
        "data_services": ["Kinesis"],
        "observability": ["Prometheus", "FluentD", "ELK"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/export-service",
      "last_updated": "2026-01-24T09:27:00Z",
      "health_indicators": {
        "security_risk": "MEDIUM-HIGH",
        "maintenance_risk": "MEDIUM",
        "coupling_risk": "HIGH",
        "complexity_grade": "B (Good)",
        "export_types": 15,
        "test_files": 29
      }
    },
    "upload-service": {
      "classification": "service",
      "tech_stack": {
        "language": "JavaScript (ES6+)",
        "runtime": "Node.js",
        "framework": "Koa 2.4.1"
      },
      "architectural_style": "layered-service-architecture-3-tier",
      "domains": ["file-management", "image-upload", "lambda-triggering", "csv-processing"],
      "infrastructure": {
        "api_type": "REST",
        "endpoints": 9,
        "databases": ["MongoDB Atlas"],
        "storage": ["S3"],
        "compute": ["EC2 + Classic ELB"],
        "lambda_integrations": 4,
        "step_functions": 1,
        "kinesis_streams": 1,
        "observability": ["Prometheus", "CloudWatch"]
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/upload-service",
      "last_updated": "2026-01-24T16:00:00.000Z",
      "health_indicators": {
        "test_coverage": "unknown",
        "unit_tests": 3,
        "e2e_tests": 7,
        "code_quality_grade": "A-",
        "maintainability_score": 9,
        "readability_rating": "Excellent"
      }
    },
    "vf-api-workers": {
      "classification": "worker",
      "tech_stack": {
        "language": "JavaScript ES6 (with Babel) + TypeScript",
        "runtime": "Node.js 18.x",
        "framework": "AWS Lambda",
        "paradigm": "Functional Programming"
      },
      "architectural_style": "serverless-event-driven-middleware-pipeline",
      "domains": ["fan-scoring", "verification-management", "score-ingestion", "operations-visibility"],
      "infrastructure": {
        "platform": "AWS Lambda",
        "lambdas": 8,
        "databases": ["DynamoDB"],
        "streams": ["Kinesis", "DynamoDB Streams"],
        "queues": ["SQS"],
        "storage": ["S3"],
        "iac": "Terraform (Terramisu v1.8.3)",
        "ci_cd": "GitLab CI"
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/vf-api-workers",
      "last_updated": "2026-01-24T17:30:00Z",
      "health_indicators": {
        "test_coverage": "60-70% unit, 100% integration",
        "unit_tests": 29,
        "integration_tests": 8,
        "code_quality_grade": "A",
        "readability_rating": "Excellent"
      }
    },
    "verifiedfan-lib": {
      "classification": "library",
      "tech_stack": {
        "language": "JavaScript (ES6+), TypeScript",
        "runtime": "Node.js >=12.14",
        "monorepo_tool": "Lerna"
      },
      "architectural_style": "monorepo-library-independent-versioning",
      "domains": ["aws-services", "logging", "kafka", "mongodb", "http-requests", "jwt", "testing"],
      "infrastructure": {
        "package_count": 48,
        "test_framework": "Jest",
        "test_file_count": 90
      },
      "doc_location": "/Users/Brodie.Balser/.vf-docs/verifiedfan-lib",
      "last_updated": "2026-01-24T10:07:00Z",
      "health_indicators": {
        "nodejs_version": ">=12.14 (EOL: critical)",
        "critical_issues": 2,
        "deprecated_packages": 1
      }
    }
  },
  "cross_repo_patterns": {
    "serverless-event-driven": ["registration-workers", "appsync", "campaign-pipeline-workers", "vf-api-workers"],
    "typescript-node18": ["registration-workers", "vf-api-workers"],
    "typescript-modern": ["appsync"],
    "kafka-publishers": ["registration-workers"],
    "dynamodb-users": ["registration-workers", "entry-service", "appsync", "campaign-pipeline-workers", "vf-api-workers"],
    "step-function-orchestrators": ["registration-workers"],
    "react-frontend": ["admin-ui", "admin-ui-next"],
    "next-js-frontend": ["admin-ui-next"],
    "redux-state-management": ["admin-ui"],
    "graphql-clients": ["admin-ui", "admin-ui-next"],
    "zustand-state-management": ["admin-ui-next"],
    "typescript-5": ["admin-ui-next", "appsync", "demand-workers"],
    "graphql-servers": ["monoql", "appsync"],
    "kubernetes-deployments": ["admin-ui", "entry-service", "monoql", "user-service"],
    "koa-services": ["campaign-service", "entry-service", "monoql", "user-service", "code-service", "export-service", "upload-service"],
    "mongodb-users": ["campaign-service", "registration-workers", "entry-service", "monoql", "campaign-pipeline-workers", "demand-workers", "user-service", "code-service", "export-service", "upload-service"],
    "redis-caching": ["campaign-service", "appsync", "demand-workers"],
    "ramda-functional": ["campaign-service", "admin-ui", "entry-service", "campaign-pipeline-workers", "demand-workers", "user-service", "code-service", "export-service", "upload-service", "vf-api-workers"],
    "rest-api-services": ["campaign-service", "entry-service", "user-service", "code-service", "export-service", "upload-service"],
    "bdd-testing": ["campaign-service", "entry-service", "monoql", "appsync", "demand-workers", "user-service", "code-service", "upload-service", "vf-api-workers"],
    "kinesis-publishers": ["campaign-service", "entry-service", "campaign-pipeline-workers", "user-service", "vf-api-workers"],
    "kinesis-consumers": ["demand-workers", "campaign-pipeline-workers", "vf-api-workers"],
    "sqs-publishers": ["campaign-service", "entry-service", "campaign-pipeline-workers", "demand-workers"],
    "sqs-consumers": ["vf-api-workers"],
    "s3-storage": ["entry-service", "monoql", "campaign-pipeline-workers", "code-service", "export-service", "upload-service", "vf-api-workers"],
    "dataloader-batching": ["monoql"],
    "apollo-server": ["monoql"],
    "appsync-managed": ["appsync"],
    "pipeline-resolvers": ["appsync"],
    "lambda-integrations": ["appsync", "campaign-pipeline-workers", "upload-service", "vf-api-workers"],
    "terraform-infrastructure": ["appsync", "vf-api-workers"],
    "esbuild-builds": ["appsync"],
    "serverless-workers": ["registration-workers", "demand-workers", "campaign-pipeline-workers", "vf-api-workers"],
    "lambda-event-processing": ["demand-workers", "campaign-pipeline-workers", "vf-api-workers"],
    "notification-processing": ["demand-workers", "vf-api-workers"],
    "avro-processing": ["campaign-pipeline-workers"],
    "data-pipeline-processing": ["campaign-pipeline-workers"],
    "lerna-monorepo": ["verifiedfan-lib"]
  },
  "anomalies": [
    {
      "type": "orphaned_events",
      "severity": "warning",
      "description": "registration-workers publishes 5 Kafka topics (campaigns, events, markets, registered_markets, registrations) but no known consumers have been documented yet",
      "affected_repos": ["registration-workers"],
      "recommendation": "Document consumer services or verify if events are consumed by external systems"
    },
    {
      "type": "external_dependencies",
      "severity": "info",
      "description": "registration-workers depends on external services (all now documented)",
      "affected_repos": ["registration-workers"],
      "missing_services": [],
      "documented_services": ["campaign-service", "entry-service", "code-service", "user-service", "export-service"],
      "recommendation": "All dependent services have been documented"
    },
    {
      "type": "missing_dependencies",
      "severity": "warning",
      "description": "admin-ui references @verifiedfan/styled-components (MISSING) and uses Redux (MISSING_FROM_PKG) without proper package.json entries. admin-ui-next has no missing dependencies.",
      "affected_repos": ["admin-ui"],
      "missing_packages": ["@verifiedfan/styled-components", "redux"],
      "recommendation": "Add missing dependencies to package.json or remove unused imports"
    },
    {
      "type": "modern_frontend",
      "severity": "info",
      "description": "admin-ui-next uses modern React 18, Next.js 15, TypeScript 5, and Apollo Client 3 with excellent FP patterns",
      "affected_repos": ["admin-ui-next"],
      "recommendation": "admin-ui-next demonstrates modern best practices that could be reference for admin-ui modernization"
    },
    {
      "type": "outdated_versions",
      "severity": "high",
      "description": "admin-ui uses significantly outdated versions of critical libraries",
      "affected_repos": ["admin-ui"],
      "outdated_packages": [
        {"name": "react", "current": "16.14.0", "status": "outdated"},
        {"name": "apollo-client", "current": "^2.6.10", "status": "outdated"},
        {"name": "graphql", "current": "^0.13.0", "status": "outdated"},
        {"name": "ramda", "current": "^0.24.1", "status": "outdated"}
      ],
      "recommendation": "Plan major dependency upgrades to modern versions (React 18+, Apollo Client 3+, GraphQL 16+)"
    },
    {
      "type": "external_service_dependencies",
      "severity": "info",
      "description": "admin-ui depends on 5 services that have not been fully documented yet. admin-ui-next depends on 3 services (monoql is documented, reg-ui and ticketmaster-identity-service not yet documented).",
      "affected_repos": ["admin-ui", "admin-ui-next"],
      "missing_services": ["monoql", "fan-ui", "reg-ui", "discovery-api", "ticketmaster-identity-service"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "frontend_evolution",
      "severity": "info",
      "description": "admin-ui-next is the modernized successor to admin-ui with improved architecture (Next.js App Router + FSD), modern dependencies (React 18, TypeScript 5), and better state management (Zustand)",
      "affected_repos": ["admin-ui", "admin-ui-next"],
      "recommendation": "Track migration progress from admin-ui to admin-ui-next. Both repos currently coexist."
    },
    {
      "type": "orphaned_events",
      "severity": "warning",
      "description": "campaign-service publishes 7 internal events but no known consumers have been documented yet",
      "affected_repos": ["campaign-service"],
      "events": ["campaign.created", "campaign.updated", "campaign.status_changed", "market.created", "market.updated", "artist_extension.created", "artist_extension.updated"],
      "recommendation": "Identify and document services that consume these events (likely registration-workers, admin-ui, entry-service)"
    },
    {
      "type": "orphaned_event_consumer",
      "severity": "info",
      "description": "campaign-service consumes 'scheduled.refresh_trigger' but no known publisher documented",
      "affected_repos": ["campaign-service"],
      "recommendation": "Document the scheduler/cron service that publishes this trigger"
    },
    {
      "type": "orphaned_data_streams",
      "severity": "warning",
      "description": "campaign-service publishes to Kinesis stream 'campaign-data-stream' but no known consumers documented",
      "affected_repos": ["campaign-service"],
      "recommendation": "Document analytics services or data warehouses consuming this stream"
    },
    {
      "type": "orphaned_queues",
      "severity": "warning",
      "description": "campaign-service publishes to 2 SQS queues but no known consumers documented",
      "affected_repos": ["campaign-service"],
      "queues": ["refresh-selections-queue", "data-pipeline-queue"],
      "recommendation": "Likely consumed by selection-service and data-pipeline-service - document these when available"
    },
    {
      "type": "library_version_drift",
      "severity": "info",
      "description": "Internal library version drift detected across repositories",
      "affected_repos": ["campaign-service", "admin-ui", "entry-service", "appsync"],
      "libraries": [
        {"name": "@verifiedfan/lib", "versions": ["1.0.0", "1.6.1"], "drift": "major"},
        {"name": "@verifiedfan/locale", "versions": ["^1.2.0", "1.4.0"], "drift": "minor"},
        {"name": "@verifiedfan/log", "versions": ["^1.4.0", "1.4.1"], "drift": "patch"},
        {"name": "@verifiedfan/access-log", "versions": ["1.4.0", "1.1.1"], "drift": "minor"},
        {"name": "@verifiedfan/date", "versions": ["1.3.4", "1.2.1"], "drift": "minor"},
        {"name": "@verifiedfan/redis", "versions": ["2.0.2", "1.4.2"], "drift": "minor"},
        {"name": "@verifiedfan/schemas", "versions": ["1.3.1", "1.3.0"], "drift": "patch"},
        {"name": "@verifiedfan/aws", "versions": ["2.4.0", "1.8.0"], "drift": "minor"}
      ],
      "recommendation": "Consider standardizing internal library versions across services"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "campaign-service depends on 4 external services that have not been documented yet",
      "affected_repos": ["campaign-service"],
      "missing_services": ["discovery-api", "email-service", "selection-service", "data-pipeline-service"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "orphaned_events",
      "severity": "warning",
      "description": "entry-service publishes 5 internal events but no known consumers have been documented yet",
      "affected_repos": ["entry-service"],
      "events": ["campaign.registration.created", "campaign.registration.updated", "campaign.phone.confirmed", "campaign.entry.scored", "campaign.code.assigned"],
      "recommendation": "Likely consumed by registration-workers - verify and update when registration-workers is fully documented"
    },
    {
      "type": "orphaned_event_consumer",
      "severity": "warning",
      "description": "entry-service consumes 3 events but no known publishers documented",
      "affected_repos": ["entry-service"],
      "events": ["user.profile.requested", "campaign.configuration.requested", "fanscore.lookup.completed"],
      "recommendation": "Document user-service and other publishers to complete event flow mapping"
    },
    {
      "type": "resolved_data_stream",
      "severity": "info",
      "description": "entry-service publishes to Kinesis stream 'vf1-input-stream' consumed by campaign-pipeline-workers",
      "affected_repos": ["entry-service", "campaign-pipeline-workers"],
      "recommendation": "Connection documented"
    },
    {
      "type": "orphaned_queues",
      "severity": "warning",
      "description": "entry-service publishes to SQS queue 'reg-replica-retry-score' but no known consumers documented",
      "affected_repos": ["entry-service"],
      "recommendation": "Likely consumed by registration-workers or scoring service - document when available"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "entry-service depends on 4 external services that have not been documented yet",
      "affected_repos": ["entry-service"],
      "missing_services": ["user-service", "tm-accounts", "sfmc"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "high",
      "description": "entry-service and user-service both use significantly outdated Koa 2.4.1 (6 years old)",
      "affected_repos": ["entry-service", "user-service"],
      "outdated_packages": [
        {"name": "koa", "current": "2.4.1", "status": "6 years outdated"},
        {"name": "jest", "current": "25.1.0 (entry-service), 30.0.4 (user-service)", "status": "outdated"},
        {"name": "cucumber", "current": "6.0.5", "status": "outdated"}
      ],
      "recommendation": "Plan dependency upgrades, especially Koa (security and feature updates). Consider coordinating upgrades across both services."
    },
    {
      "type": "shared_database",
      "severity": "info",
      "description": "Multiple services share MongoDB database 'entry-service'",
      "affected_repos": ["registration-workers", "entry-service", "demand-workers", "campaign-pipeline-workers"],
      "recommendation": "Ensure proper coordination and migration strategies when schema changes occur"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "demand-workers depends on 4 external services that have not been documented yet",
      "affected_repos": ["demand-workers"],
      "missing_services": ["demand-capture/api", "tm-discovery", "sms-service", "tm-account-service"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "medium",
      "description": "demand-workers uses outdated versions of critical libraries",
      "affected_repos": ["demand-workers"],
      "outdated_packages": [
        {"name": "moment", "current": "2.24.0", "status": "outdated (use date-fns or dayjs)"},
        {"name": "uuid", "current": "3.2.1", "status": "5+ major versions behind"}
      ],
      "recommendation": "Upgrade moment (or migrate to date-fns/dayjs) and uuid to latest versions"
    },
    {
      "type": "shared_dynamodb_table",
      "severity": "info",
      "description": "Multiple workers share the demand-table",
      "affected_repos": ["registration-workers", "demand-workers", "campaign-pipeline-workers"],
      "tables": ["demand-table"],
      "recommendation": "Ensure proper coordination when schema or access patterns change"
    },
    {
      "type": "api_gateway_dependencies",
      "severity": "info",
      "description": "monoql acts as GraphQL gateway for 9 downstream services",
      "affected_repos": ["monoql"],
      "downstream_services": ["campaign-service", "entry-service", "user-service", "code-service", "export-service", "uploads-service", "wave-service", "ticketmaster-identity", "ppc-service"],
      "documented_services": ["campaign-service", "entry-service", "user-service", "code-service", "export-service"],
      "missing_services": ["uploads-service", "wave-service", "ticketmaster-identity", "ppc-service"],
      "recommendation": "Document remaining downstream services to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "critical",
      "description": "monoql uses critically outdated GraphQL version (0.12.0 from 2017, current is 16.x)",
      "affected_repos": ["monoql"],
      "outdated_packages": [
        {"name": "graphql", "current": "0.12.0", "status": "7 years outdated"},
        {"name": "babel", "current": "6.x", "status": "end-of-life"},
        {"name": "webpack", "current": "3.x", "status": "known vulnerabilities"}
      ],
      "recommendation": "URGENT: Plan major upgrade to GraphQL 16.x, Babel 7+, and Webpack 5+"
    },
    {
      "type": "library_version_drift",
      "severity": "info",
      "description": "monoql uses different versions of shared libraries compared to other services",
      "affected_repos": ["monoql", "campaign-service", "entry-service"],
      "libraries": [
        {"name": "@verifiedfan/prometheus", "versions": ["2.0.4", "2.0.5"], "drift": "patch"},
        {"name": "@verifiedfan/titan-request", "versions": ["2.0.2", "2.0.4"], "drift": "patch"}
      ],
      "recommendation": "Consider standardizing internal library versions across services"
    },
    {
      "type": "shared_dynamodb_tables",
      "severity": "info",
      "description": "Multiple services share DynamoDB tables for fan identity and fanscore",
      "affected_repos": ["entry-service", "appsync"],
      "tables": ["fan-identity-table", "acct-fanscore-table"],
      "recommendation": "Ensure proper coordination when schema or access patterns change"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "appsync depends on 10 external services that have not been documented yet",
      "affected_repos": ["appsync"],
      "missing_services": ["tm-account-service", "event-details", "phonescore-service", "bot-or-not-service", "arm-scoring-service", "liveness-check-service", "fan-location-service", "cluster-lookup-service", "upsert-entry-service"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "medium",
      "description": "appsync uses outdated Cucumber version (3.2.0, current is v9+)",
      "affected_repos": ["appsync"],
      "outdated_packages": [
        {"name": "cucumber", "current": "3.2.0", "status": "5+ major versions behind"}
      ],
      "recommendation": "Upgrade Cucumber to v9+ for better TypeScript support and modern features"
    },
    {
      "type": "external_webhook_consumer",
      "severity": "info",
      "description": "appsync consumes webhooks from external IDV vendors (Persona, etc.) for liveness verification",
      "affected_repos": ["appsync"],
      "recommendation": "Ensure webhook security and proper error handling for external integrations"
    },
    {
      "type": "orphaned_queues",
      "severity": "warning",
      "description": "campaign-pipeline-workers publishes to verdict-reporter-queue and sms-wave-email-queue but no known consumers documented",
      "affected_repos": ["campaign-pipeline-workers"],
      "queues": ["verdict-reporter-queue", "sms-wave-email-queue"],
      "recommendation": "Document consumer services for these notification queues"
    },
    {
      "type": "orphaned_kinesis_stream",
      "severity": "warning",
      "description": "campaign-pipeline-workers publishes to save-codes-stream but no known consumers documented",
      "affected_repos": ["campaign-pipeline-workers"],
      "streams": ["save-codes-stream"],
      "recommendation": "Document code-service or other consumers of code assignment events"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "campaign-pipeline-workers depends on 9 external services that have not been documented yet",
      "affected_repos": ["campaign-pipeline-workers"],
      "missing_services": ["code-service", "user-service", "sms-service", "sfmc-service", "admin-ui", "registration-services", "data-science-scoring"],
      "recommendation": "Document these service repositories to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "medium",
      "description": "campaign-pipeline-workers uses outdated versions of critical libraries",
      "affected_repos": ["campaign-pipeline-workers"],
      "outdated_packages": [
        {"name": "moment", "current": "2.24.0", "status": "outdated (use date-fns or dayjs)"},
        {"name": "uuid", "current": "3.2.1", "status": "5+ major versions behind"}
      ],
      "recommendation": "Upgrade moment (or migrate to date-fns/dayjs) and uuid to latest versions"
    },
    {
      "type": "s3_dependency",
      "severity": "info",
      "description": "campaign-pipeline-workers reads scored files from data science S3 buckets",
      "affected_repos": ["campaign-pipeline-workers"],
      "buckets": ["vf-scoring", "tm-ds-fanscore"],
      "recommendation": "Ensure proper S3 bucket policies and access controls for cross-team data sharing"
    },
    {
      "type": "critical_security_vulnerabilities",
      "severity": "critical",
      "description": "user-service uses severely outdated security-critical packages for authentication",
      "affected_repos": ["user-service"],
      "outdated_packages": [
        {"name": "jsonwebtoken", "current": "8.5.0", "status": "6+ years outdated, known CVEs"},
        {"name": "node-rsa", "current": "0.4.2", "status": "7+ years outdated, cryptography library"}
      ],
      "recommendation": "URGENT: Update jsonwebtoken and node-rsa immediately due to security implications. These packages handle authentication and encryption."
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "user-service depends on 2 internal services (all now documented)",
      "affected_repos": ["user-service"],
      "missing_services": [],
      "documented_services": ["entry-service", "export-service"],
      "recommendation": "All dependent services have been documented"
    },
    {
      "type": "test_coverage_disabled",
      "severity": "high",
      "description": "user-service has test coverage metrics disabled",
      "affected_repos": ["user-service"],
      "recommendation": "Enable Jest coverage reporting with baseline threshold (60%) to track code coverage trends"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "export-service depends on 4 external services that have been partially documented",
      "affected_repos": ["export-service"],
      "missing_services": ["entries-service", "codes-service", "auth-service", "salesforce-marketing-cloud"],
      "documented_services": [],
      "recommendation": "Document these service repositories to complete the dependency graph. entries-service likely refers to entry-service, codes-service likely refers to code-service."
    },
    {
      "type": "outdated_versions",
      "severity": "medium",
      "description": "export-service uses outdated versions of critical libraries",
      "affected_repos": ["export-service"],
      "outdated_packages": [
        {"name": "moment", "current": "2.24.0", "status": "outdated (use date-fns or dayjs)"},
        {"name": "uuid", "current": "3.3.2", "status": "5 major versions behind"},
        {"name": "koa", "current": "2.4.1", "status": "6 years outdated"}
      ],
      "recommendation": "Upgrade moment (or migrate to date-fns/dayjs), uuid to latest versions, and consider Koa upgrade"
    },
    {
      "type": "shared_mongodb_database",
      "severity": "info",
      "description": "export-service reads from shared MongoDB databases used by other services",
      "affected_repos": ["export-service", "campaign-service", "entry-service", "user-service"],
      "databases": ["campaigns", "entries", "users"],
      "recommendation": "Coordinate schema changes across services. export-service is read-only which reduces risk."
    },
    {
      "type": "high_coupling_risk",
      "severity": "warning",
      "description": "export-service has HIGH coupling risk with 14 internal @verifiedfan libraries",
      "affected_repos": ["export-service"],
      "recommendation": "Monitor library updates carefully as changes could impact multiple export types and SFMC integration"
    },
    {
      "type": "outdated_versions",
      "severity": "critical",
      "description": "code-service uses severely outdated and end-of-life packages",
      "affected_repos": ["code-service"],
      "outdated_packages": [
        {"name": "babel", "current": "6.x", "status": "end-of-life since 2018"},
        {"name": "jest", "current": "21.2.1", "status": "8 major versions behind"},
        {"name": "webpack", "current": "3.8.1", "status": "known CVEs"},
        {"name": "eslint", "current": "4.9.0", "status": "4 major versions behind"},
        {"name": "request-promise-native", "current": "used", "status": "deprecated package"}
      ],
      "recommendation": "URGENT: Plan complete dependency modernization or consider rewrite (8-10 weeks modernization vs 4-6 weeks rewrite)"
    },
    {
      "type": "library_version_drift",
      "severity": "info",
      "description": "code-service uses older versions of internal libraries compared to other services",
      "affected_repos": ["code-service"],
      "libraries": [
        {"name": "@verifiedfan/mongodb", "versions": ["1.7.9", "2.1.0"], "drift": "minor"},
        {"name": "@verifiedfan/tracing", "versions": ["2.0.2", "3.0.1"], "drift": "major"}
      ],
      "recommendation": "Consider upgrading internal libraries to match versions used by other services"
    },
    {
      "type": "shared_koa_version",
      "severity": "info",
      "description": "code-service shares same Koa version (2.4.1) with entry-service and user-service",
      "affected_repos": ["code-service", "entry-service", "user-service"],
      "recommendation": "Consider coordinating Koa upgrades across all three services"
    },
    {
      "type": "missing_external_dependencies",
      "severity": "info",
      "description": "code-service depends on JWT/Auth Service that has not been documented yet",
      "affected_repos": ["code-service"],
      "missing_services": ["JWT/Auth Service"],
      "recommendation": "Document JWT/Auth Service to complete the dependency graph"
    },
    {
      "type": "outdated_versions",
      "severity": "high",
      "description": "upload-service uses significantly outdated Koa 2.4.1 (6 years old) and outdated testing libraries",
      "affected_repos": ["upload-service"],
      "outdated_packages": [
        {"name": "koa", "current": "2.4.1", "status": "6 years outdated"},
        {"name": "cucumber", "current": "4.8.6", "status": "5+ major versions behind"},
        {"name": "csv-parse", "current": "4.8.6", "status": "outdated"},
        {"name": "lightstep-tracer", "current": "0.28.0", "status": "outdated"},
        {"name": "opentracing", "current": "0.14.4", "status": "outdated"}
      ],
      "recommendation": "Plan dependency upgrades, especially Koa (security and feature updates). Consider coordinating with entry-service, user-service, code-service, and export-service which all use same Koa version."
    },
    {
      "type": "shared_koa_version",
      "severity": "info",
      "description": "upload-service shares same Koa version (2.4.1) with entry-service, user-service, code-service, and export-service",
      "affected_repos": ["upload-service", "entry-service", "user-service", "code-service", "export-service"],
      "recommendation": "Consider coordinating Koa upgrades across all five services"
    },
    {
      "type": "library_version_drift",
      "severity": "info",
      "description": "upload-service uses older versions of internal libraries compared to other services",
      "affected_repos": ["upload-service"],
      "libraries": [
        {"name": "@verifiedfan/tracing", "versions": ["2.0.2", "3.0.1"], "drift": "major"},
        {"name": "@verifiedfan/aws", "versions": ["2.2.1", "2.13.0"], "drift": "minor"},
        {"name": "@verifiedfan/configs", "versions": ["1.1.0", "1.2.4"], "drift": "minor"}
      ],
      "recommendation": "Consider upgrading internal libraries to match versions used by other services"
    },
    {
      "type": "api_gateway_dependencies",
      "severity": "info",
      "description": "upload-service is consumed by monoql GraphQL gateway (Upload domain)",
      "affected_repos": ["upload-service", "monoql"],
      "recommendation": "Changes to upload-service API endpoints may impact monoql Upload domain resolvers"
    },
    {
      "type": "lambda_triggers",
      "severity": "info",
      "description": "upload-service triggers 4 Lambda functions and 1 Step Function for campaign processing",
      "affected_repos": ["upload-service"],
      "lambda_functions": [
        "prd2011-{env}-cmp-process-sms-wave",
        "prd2011-{env}-ccpa-prcss-req",
        "prd2011-{env}-cmp-prcss-scheduled",
        "prd2011-{env}-cmp-gen-codes"
      ],
      "step_functions": ["prd2011-{env}-reg-sel"],
      "recommendation": "Document lambda-workers or campaign-pipeline-workers that implement these functions"
    },
    {
      "type": "orphaned_kinesis_stream",
      "severity": "warning",
      "description": "upload-service publishes to Kinesis stream (PRD1541*) but no known consumers documented",
      "affected_repos": ["upload-service"],
      "streams": ["PRD1541*"],
      "recommendation": "Document consumer services for upload-service Kinesis events"
    },
    {
      "type": "shared_s3_bucket",
      "severity": "info",
      "description": "upload-service shares vf-scoring S3 bucket with campaign-pipeline-workers",
      "affected_repos": ["upload-service", "campaign-pipeline-workers"],
      "buckets": ["prd2011.{env}.us-east-1.vf-scoring.tmaws"],
      "recommendation": "Ensure proper bucket policies and access patterns are coordinated between services"
    },
    {
      "type": "ec2_deployment",
      "severity": "info",
      "description": "upload-service uses EC2 + Classic ELB deployment pattern (not Kubernetes like other services)",
      "affected_repos": ["upload-service"],
      "recommendation": "Consider eventual migration to Kubernetes (EKS) to align with other services' deployment patterns"
    },
    {
      "type": "library_foundation",
      "severity": "critical",
      "description": "verifiedfan-lib is the foundational library consumed by all Verified Fan microservices. Uses end-of-life Node.js version (>=12.14, EOL: 2022-04-30) and deprecated 'request' package.",
      "affected_repos": ["verifiedfan-lib"],
      "recommendation": "URGENT: Upgrade Node.js requirement to v18+ and replace deprecated 'request' package. This affects all downstream services."
    },
    {
      "type": "monorepo_library",
      "severity": "info",
      "description": "verifiedfan-lib is a Lerna monorepo with 48 independent packages. All services depend on this library.",
      "affected_repos": ["verifiedfan-lib"],
      "consumers": ["admin-ui", "campaign-service", "entry-service", "monoql", "code-service", "export-service", "upload-service", "user-service"],
      "recommendation": "Changes to this library have wide-reaching impact. Ensure thorough testing and coordinated rollout."
    }
  ]
}
